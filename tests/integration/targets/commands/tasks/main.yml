---
# 0: clean existing
- include_tasks:
    file: 0_clean_existing.yml
    apply:
      tags:
        - clean_existing
  tags:
    - clean_existing

# config
- name: Add two vms to the Vagrantfile
  jclaveau.vagrant.config:
  args:
    state: "present"
    name: "{{ item }}"
    config:
      box: debian/buster64
      # box: boxomatic/alpine-3.13
      # box: generic/alpine38
      cpus: 4
    # log: true
  register: vagrant_config_results
  loop:
    - "srv001"
    - "srv002"

# 1: up
- include_tasks:
    file: 1_up_test.yml
    apply:
      tags:
        - up
  tags:
    # - always
    - up

# 2: status
- include_tasks:
    file: 2_status_test.yml
    apply:
      tags:
        - status
  tags:
    - status

- name: stop
  ansible.builtin.fail:

# ports
# ssh_config
# connect
# suspend
# resume
# halt
# destroy
# clean config
